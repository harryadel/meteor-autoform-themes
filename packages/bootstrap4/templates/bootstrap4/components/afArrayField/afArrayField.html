<template name="afArrayField_bootstrap4">
    <div class="card {{#if afFieldIsInvalid name=this.name}}border-danger{{/if}} {{cardClass}} mb-3">
        {{#with afFieldLabelText name=this.atts.name}}
            <div class="card-header {{headingClass}}">{{this}}</div>
        {{/with}}
        <ul class="list-group {{listGroupClass}}">
            {{#if afFieldIsInvalid name=this.atts.name}}
                <li class="list-group-item autoform-array-item">
                    <span class="text-danger small">
                        {{{afFieldMessage name=this.atts.name}}}
                    </span>
                </li>
            {{/if}}
            {{#afEachArrayItem name=this.atts.name minCount=this.atts.minCount maxCount=this.atts.maxCount}}
                <li class="list-group-item autoform-array-item">
                    <div class="d-flex">
                        <div class="autoform-remove-item-wrap mr-2">
                            {{#if afArrayFieldHasMoreThanMinimum name=../atts.name minCount=../atts.minCount maxCount=../atts.maxCount}}
                                <button type="button"
                                        class="btn btn-primary autoform-remove-item">{{>afIcon_bootstrap4 fa='minus'}}
                                </button>
                            {{/if}}
                        </div>
                        <div class="autoform-array-item-body w-100">
                            {{> afQuickField name=this.name label=false options=afOptionsFromSchema}}
                        </div>
                    </div>
                </li>
            {{/afEachArrayItem}}
            {{#if afArrayFieldHasLessThanMaximum name=this.atts.name minCount=this.atts.minCount
                  maxCount=this.atts.maxCount}}
                <li class="list-group-item w-100">
                    <button type="button" class="btn btn-primary autoform-add-item"
                            data-autoform-field="{{this.atts.name}}" data-autoform-minCount="{{this.atts.minCount}}"
                            data-autoform-maxCount="{{this.atts.maxCount}}">{{>afIcon_bootstrap4 fa='plus'}}</button>
                </li>
            {{/if}}
        </ul>
    </div>
</template>
